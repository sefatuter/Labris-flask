{% extends "base.html" %}

{% block title %}Update User{% endblock %}

{% block content %}

    <!-- Flash messages -->
    {% for message in get_flashed_messages(with_categories=True) %}
    {% set category, msg = message %}
    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
        {{ msg }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% endfor %}

    <h2>Update User</h2>
    <form method="POST" action="{{ url_for('user_update', id=user.id) }}">
        <div class="form-group">
            <label for="username">Username</label>
            <input type="text" class="form-control" id="username" name="username" value="{{ user.username }}" readonly>
        </div>
        <div class="form-group">
            <label for="firstname">First Name</label>
            <input type="text" class="form-control" id="firstname" name="firstname" value="{{ request.form.firstname or user.firstname }}" required>
        </div>
        <div class="form-group">
            <label for="middlename">Middle Name</label>
            <input type="text" class="form-control" id="middlename" name="middlename" value="{{ request.form.middlename or user.middlename }}">
        </div>
        <div class="form-group">
            <label for="lastname">Last Name</label>
            <input type="text" class="form-control" id="lastname" name="lastname" value="{{ request.form.lastname or user.lastname }}" required>
        </div>
        <div class="form-group">
            <label for="birthdate">Birthdate</label>
            <input type="date" class="form-control" id="birthdate" name="birthdate" value="{{ request.form.birthdate or user.birthdate }}" required>
        </div>
        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" class="form-control" id="email" name="email" value="{{ request.form.email or user.email }}" required>
        </div>
        <div class="form-group">
            <label for="password">Password (leave blank to keep current)</label>
            <input type="password" class="form-control" id="password" name="password">
        </div>
        <button type="submit" class="formbtn btn btn-warning" style="width: 200px; color: white;">Update User</button>
        <a href="{{ url_for('user_list') }}" class="formbtn btn btn-info" style="width: 200px; color: white;">User List</a>
    </form>

{% endblock %}
